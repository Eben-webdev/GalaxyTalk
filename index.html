<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GalaxyTalk</title>
<style>
*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
body{margin:0;background:black;color:#eee;overflow:hidden}
.hidden{display:none}
canvas{position:fixed;inset:0;z-index:-1}

/* Cards / Login */
.center{height:100vh;display:flex;align-items:center;justify-content:center}
.card{background:rgba(40,0,70,.9);padding:28px;border-radius:16px;width:340px;box-shadow:0 0 30px rgba(160,80,255,.6);text-align:center}
.card h2,.card h3{margin-top:0}

input{width:100%;padding:12px 14px;margin-top:12px;border-radius:10px;border:1px solid #5b2b82;background:#0e0018;color:#fff;font-size:15px}
input::placeholder{color:#aaa}

.btn{width:100%;margin-top:14px;padding:12px;border-radius:999px;border:1px solid #a855f7;background:linear-gradient(135deg,#3b0764,#7e22ce);color:white;font-weight:600;letter-spacing:.3px}
.btn:hover{filter:brightness(1.15)}

.error{color:#ff6b6b;font-size:14px;min-height:18px;margin-top:6px}

/* App layout */
#app{display:flex;height:100vh}
#sidebar{width:280px;background:rgba(20,0,40,.85);backdrop-filter:blur(6px);padding:12px;display:flex;flex-direction:column}
#sidebar h3{margin:6px 6px 10px}

.user{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;cursor:pointer;transition:.15s}
.user:hover{background:rgba(255,255,255,.08)}

.status{width:10px;height:10px;border-radius:50%}
.online{background:#4ade80}
.offline{background:#6b7280}

#chat{flex:1;display:flex;flex-direction:column;background:linear-gradient(180deg,rgba(20,0,40,.6),rgba(5,0,10,.8))}
#messages{flex:1;padding:16px;overflow-y:auto}

.msg{max-width:70%;padding:10px 14px;margin-bottom:10px;border-radius:14px;background:rgba(130,0,170,.35)}
.me{margin-left:auto;background:linear-gradient(135deg,#6d28d9,#9333ea)}

#typing{height:20px;padding-left:16px;color:#bbb;font-style:italic}

#inputBar{display:flex;gap:10px;padding:14px;background:rgba(20,0,40,.9)}
#msgInput{flex:1;font-size:16px}
#sendBtn{width:90px}

/* Settings */
#settingsBtn{position:fixed;bottom:16px;left:16px;width:46px;height:46px;border-radius:50%;border:none;background:linear-gradient(135deg,#6d28d9,#9333ea);color:white;font-size:20px}
#settings{position:fixed;bottom:70px;left:16px;background:rgba(30,0,60,.95);padding:16px;border-radius:14px;width:240px;box-shadow:0 0 25px rgba(160,80,255,.5)} </style>

</head>
<body>
<canvas id="space"></canvas>

<div id="siteAccess" class="center">
  <div class="card">
    <h2>GalaxyTalk</h2>
    <input id="sitePass" type="password" placeholder="Site password">
    <div id="siteErr" class="error"></div>
    <button class="btn" onclick="checkSite()">Enter</button>
  </div>
</div>

<div id="login" class="center hidden">
  <div class="card">
    <h3>Login</h3>
    <input id="username" placeholder="Username">
    <input id="pin" type="password" placeholder="4-digit PIN">
    <div id="loginErr" class="error"></div>
    <button class="btn" onclick="login()">Login</button>
  </div>
</div>
    <button class="btn" onclick="login()">Login</button>
  </div>
</div>

<div id="app" class="hidden">
  <div id="sidebar">
    <div id="users"></div>
  </div>

  <div id="chat">
    <div id="messages"></div>
    <div id="typing" class="hidden"></div>
    <div id="inputBar">
      <input id="msgInput" placeholder="Message">
      <button onclick="sendMsg()">Send</button>
    </div>
  </div>

<button id="settingsBtn" onclick="toggleSettings()">⚙</button>

  <div id="settings" class="hidden">
  <h4>Admin Panel</h4>
  <input id="newUser" placeholder="Username">
  <input id="newPin" placeholder="PIN">
  <button class="btn" onclick="addUser()">Add User</button>
</div>
</div>

<script>
// ===== SITE ACCESS PASSWORD (FIXED – NO MODULES) =====
const SITE_PASSWORD = "1886";

function checkSite(){
  const input = document.getElementById("sitePass").value.trim();
  const err = document.getElementById("siteErr");

  if(input === SITE_PASSWORD){
    document.getElementById("siteAccess").classList.add("hidden");
    document.getElementById("login").classList.remove("hidden");
    err.textContent = "";
  } else {
    err.textContent = "Incorrect site password";
  }
}

// ===== USERS (LOCAL AUTH – GITHUB PAGES SAFE) =====
const USERS={
"Faheemah":"9846","SamuelR":"5891","SamuelC":"2339","Ethan":"8213",
"Elnathan":"9999","Caroline":"4006","Molly":"2296","Zara":"6701",
"Danny":"7494","Shell-Lee":"0754","Raygan":"5124","Jacob":"7596",
"Nathan":"2006","Kiera":"4888","Karter":"1115","Meadleen":"5565",
"Eli":"0758","Hadlee":"9160"
};

let currentUser=null;

function login(){
  const u=document.getElementById("username").value.trim();
  const p=document.getElementById("pin").value.trim();
  const err=document.getElementById("loginErr");

  if(!USERS[u]||USERS[u]!==p){
    err.textContent="Invalid username or PIN";
    return;
  }

  currentUser=u;
  document.getElementById("login").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");

  if(u==="Elnathan"){
    document.getElementById("settingsBtn").classList.remove("hidden");
  }
}
</script>

<script>
// SPACE BACKGROUND (RESTORED)
const c=document.getElementById('space');
const ctx=c.getContext('2d');
function resize(){c.width=innerWidth;c.height=innerHeight}
resize();window.onresize=resize;
let stars=Array.from({length:200},()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*1.5,a:Math.random()}));
(function anim(){ctx.clearRect(0,0,c.width,c.height);stars.forEach(s=>{s.a+=(Math.random()-.5)*.05;s.a=Math.max(0,Math.min(1,s.a));ctx.fillStyle=`rgba(255,255,255,${s.a})`;ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fill();});requestAnimationFrame(anim);})();
</script>

</body>
</html>
